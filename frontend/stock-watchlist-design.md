# ğŸ“ˆ è‚¡ç¥¨è‡ªé€‰ç•Œé¢è®¾è®¡æ–‡æ¡£

## ğŸ¯ æ¦‚è¿°

å°†åŸæœ‰çš„"è´­ç‰©è½¦"æ¦‚å¿µæ”¹é€ ä¸ºæ›´ä¸“ä¸šçš„**è‚¡ç¥¨è‡ªé€‰å’Œäº¤æ˜“ç•Œé¢**ï¼Œæä¾›ç±»ä¼¼çœŸå®é‡‘èäº¤æ˜“å¹³å°çš„ç”¨æˆ·ä½“éªŒã€‚

## ğŸ”„ æ ¸å¿ƒæ”¹è¿›å¯¹æ¯”

### åŸç‰ˆ MarketStocksPage (è´­ç‰©è½¦æ¨¡å¼)
```
âŒ è´­ç‰©è½¦æ¦‚å¿µ - ä¸ç¬¦åˆé‡‘èåœºæ™¯
âŒ ç®€å•çš„æ•°é‡é€‰æ‹©
âŒ æ‰¹é‡è´­ä¹°é€»è¾‘
âŒ ç¼ºå°‘ä¸“ä¸šé‡‘èåŠŸèƒ½
```

### æ–°ç‰ˆ StockWatchlistPage (ä¸“ä¸šæ¨¡å¼)
```
âœ… è‡ªé€‰è‚¡ç®¡ç† - ç¬¦åˆé‡‘èä¹ æƒ¯
âœ… å®æ—¶è¡Œæƒ…ç›‘æ§
âœ… ä¸“ä¸šäº¤æ˜“ç•Œé¢
âœ… ä»·æ ¼æé†’åŠŸèƒ½
âœ… è¡Œä¸šåˆ†æå·¥å…·
âœ… äº¤æ˜“è®°å½•è¿½è¸ª
```

## ğŸ—ï¸ ç•Œé¢æ¶æ„

### ä¸»è¦ç»„ä»¶ç»“æ„
```
StockWatchlistPage
â”œâ”€â”€ å¤´éƒ¨ä¿¡æ¯åŒºåŸŸ
â”‚   â”œâ”€â”€ å¯ç”¨èµ„é‡‘æ˜¾ç¤º
â”‚   â”œâ”€â”€ è‡ªé€‰è‚¡æ•°é‡
â”‚   â”œâ”€â”€ è®¢å•ç»Ÿè®¡
â”‚   â””â”€â”€ æ“ä½œæŒ‰é’®ç»„
â”œâ”€â”€ Tabå¯¼èˆª
â”‚   â”œâ”€â”€ å¸‚åœºè¡Œæƒ… Tab
â”‚   â””â”€â”€ äº¤æ˜“è®¢å• Tab
â”œâ”€â”€ å¸‚åœºè¡Œæƒ… Tab
â”‚   â”œâ”€â”€ ç­›é€‰æ’åºå·¥å…·æ 
â”‚   â”‚   â”œâ”€â”€ è¡Œä¸šç­›é€‰å™¨
â”‚   â”‚   â””â”€â”€ æ’åºé€‰æ‹©å™¨
â”‚   â””â”€â”€ è‚¡ç¥¨åˆ—è¡¨è¡¨æ ¼
â”‚       â”œâ”€â”€ è‡ªé€‰æ˜Ÿæ ‡æŒ‰é’®
â”‚       â”œâ”€â”€ è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
â”‚       â”œâ”€â”€ å®æ—¶ä»·æ ¼æ•°æ®
â”‚       â”œâ”€â”€ æ¶¨è·Œå¹…æ˜¾ç¤º
â”‚       â”œâ”€â”€ å¸‚å€¼å’Œæˆäº¤é‡
â”‚       â””â”€â”€ äº¤æ˜“æ“ä½œæŒ‰é’®
â”œâ”€â”€ äº¤æ˜“è®¢å• Tab
â”‚   â”œâ”€â”€ è®¢å•ç»Ÿè®¡æ¦‚è§ˆ
â”‚   â””â”€â”€ äº¤æ˜“è®°å½•è¡¨æ ¼
â”œâ”€â”€ è‡ªé€‰è‚¡å¯¹è¯æ¡† (WatchlistDialog)
â”‚   â”œâ”€â”€ è‡ªé€‰è‚¡åˆ—è¡¨
â”‚   â”œâ”€â”€ ä»·æ ¼å˜åŠ¨ç›‘æ§
â”‚   â””â”€â”€ ç§»é™¤æ“ä½œ
â””â”€â”€ äº¤æ˜“å¯¹è¯æ¡† (TradeDialog)
    â”œâ”€â”€ è‚¡ç¥¨ä¿¡æ¯å±•ç¤º
    â”œâ”€â”€ ä¹°å…¥/å–å‡ºåˆ‡æ¢
    â”œâ”€â”€ æ•°é‡è¾“å…¥
    â”œâ”€â”€ é‡‘é¢è®¡ç®—
    â””â”€â”€ èµ„é‡‘æ£€æŸ¥
```

## ğŸ’¡ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### 1. è‡ªé€‰è‚¡ç®¡ç†ç³»ç»Ÿ
```typescript
interface WatchlistItem {
  stock: MarketStock;
  addedDate: string;           // æ·»åŠ æ—¶é—´
  priceAlert?: {              // ä»·æ ¼æé†’
    enabled: boolean;
    targetPrice: number;
    type: 'above' | 'below';
  };
  notes?: string;             // å¤‡æ³¨ä¿¡æ¯
}
```

**åŠŸèƒ½ç‰¹ç‚¹:**
- â­ ä¸€é”®æ·»åŠ /ç§»é™¤è‡ªé€‰è‚¡
- ğŸ“… è®°å½•æ·»åŠ æ—¶é—´
- ğŸ”” ä»·æ ¼æé†’è®¾ç½® (é¢„ç•™åŠŸèƒ½)
- ğŸ“ ä¸ªäººå¤‡æ³¨ (é¢„ç•™åŠŸèƒ½)

### 2. ä¸“ä¸šäº¤æ˜“ç³»ç»Ÿ
```typescript
interface TradeOrder {
  stock: MarketStock;
  orderType: 'buy' | 'sell';  // äº¤æ˜“ç±»å‹
  quantity: number;           // äº¤æ˜“æ•°é‡
  orderPrice: number;         // æˆäº¤ä»·æ ¼
  totalValue: number;         // äº¤æ˜“æ€»é¢
  orderTime: string;          // äº¤æ˜“æ—¶é—´
}
```

**åŠŸèƒ½ç‰¹ç‚¹:**
- ğŸ’° å®æ—¶èµ„é‡‘æ£€æŸ¥
- ğŸ“Š ä¹°å…¥/å–å‡ºåˆ‡æ¢
- ğŸ§® è‡ªåŠ¨é‡‘é¢è®¡ç®—
- ğŸ“ˆ äº¤æ˜“è®°å½•è¿½è¸ª
- âš ï¸ é£é™©æç¤º

### 3. å¸‚åœºåˆ†æå·¥å…·

**ç­›é€‰åŠŸèƒ½:**
- ğŸ¢ æŒ‰è¡Œä¸šåˆ†ç±»ç­›é€‰
- ğŸ“ˆ æŒ‰æ¶¨è·Œå¹…æ’åº
- ğŸ’µ æŒ‰è‚¡ä»·æ’åº
- ğŸ”¤ æŒ‰è‚¡ç¥¨ä»£ç æ’åº

**æ•°æ®å±•ç¤º:**
- ğŸ“Š å®æ—¶è‚¡ä»·
- ğŸ“ˆ æ¶¨è·Œå¹…å’Œæ¶¨è·Œé¢
- ğŸ’° å¸‚å€¼æ ¼å¼åŒ–æ˜¾ç¤º
- ğŸ“Š æˆäº¤é‡ç®€åŒ–æ˜¾ç¤º
- ğŸ·ï¸ è¡Œä¸šæ ‡ç­¾

## ğŸ¨ UI/UX è®¾è®¡äº®ç‚¹

### è§†è§‰è®¾è®¡
- **ğŸ“± å“åº”å¼å¸ƒå±€**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **ğŸ¨ Material-UIé£æ ¼**: ç»Ÿä¸€çš„è®¾è®¡è¯­è¨€
- **ğŸŒˆ è¯­ä¹‰åŒ–é¢œè‰²**: çº¢ç»¿é…è‰²è¡¨ç¤ºæ¶¨è·Œ
- **â­ ç›´è§‚å›¾æ ‡**: æ˜Ÿæ ‡ã€è¶‹åŠ¿ç®­å¤´ç­‰

### äº¤äº’è®¾è®¡
- **ğŸ”„ Tabåˆ‡æ¢**: å¸‚åœºè¡Œæƒ… â†” äº¤æ˜“è®°å½•
- **âš¡ å¿«æ·æ“ä½œ**: ä¸€é”®æ·»åŠ è‡ªé€‰ã€å¿«é€Ÿäº¤æ˜“
- **ğŸ’¬ å³æ—¶åé¦ˆ**: æ“ä½œæˆåŠŸ/å¤±è´¥æç¤º
- **ğŸ” æ™ºèƒ½æœç´¢**: ç­›é€‰å’Œæ’åºç»„åˆ

### æ•°æ®å¯è§†åŒ–
```typescript
// æ¶¨è·Œé¢œè‰²æ˜ å°„
const getTrendColor = (change: number) => ({
  color: change >= 0 ? 'success.main' : 'error.main',
  icon: change >= 0 ? TrendingUpIcon : TrendingDownIcon
});

// å¸‚å€¼æ ¼å¼åŒ–
const formatMarketCap = (value: number) => {
  if (value >= 1e12) return `$${(value / 1e12).toFixed(2)}T`;
  if (value >= 1e9) return `$${(value / 1e9).toFixed(2)}B`;
  if (value >= 1e6) return `$${(value / 1e6).toFixed(2)}M`;
  return formatCurrency(value);
};
```

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### çŠ¶æ€ç®¡ç†
```typescript
// æ ¸å¿ƒçŠ¶æ€
const [watchlist, setWatchlist] = useState<WatchlistItem[]>([]);
const [tradeOrders, setTradeOrders] = useState<TradeOrder[]>([]);
const [currentTab, setCurrentTab] = useState(0);
const [userBalance, setUserBalance] = useState<UserBalance>(mockUserBalance);

// UIæ§åˆ¶çŠ¶æ€
const [watchlistOpen, setWatchlistOpen] = useState(false);
const [tradeDialogOpen, setTradeDialogOpen] = useState(false);
const [selectedStock, setSelectedStock] = useState<MarketStock | null>(null);
```

### å…³é”®ç®—æ³•
```typescript
// è‡ªé€‰è‚¡åˆ‡æ¢é€»è¾‘
const toggleWatchlist = useCallback((stock: MarketStock) => {
  setWatchlist(prevWatchlist => {
    const isAlreadyInWatchlist = prevWatchlist.some(
      item => item.stock.symbol === stock.symbol
    );
    
    if (isAlreadyInWatchlist) {
      return prevWatchlist.filter(item => item.stock.symbol !== stock.symbol);
    } else {
      return [...prevWatchlist, {
        stock,
        addedDate: new Date().toISOString(),
        priceAlert: {
          enabled: false,
          targetPrice: stock.currentPrice,
          type: 'above'
        }
      }];
    }
  });
}, []);

// äº¤æ˜“èµ„é‡‘æ£€æŸ¥
const addTradeOrder = useCallback((stock: MarketStock, orderType: 'buy' | 'sell', quantity: number) => {
  const totalValue = quantity * stock.currentPrice;
  
  // ä¹°å…¥æ—¶æ£€æŸ¥èµ„é‡‘æ˜¯å¦å……è¶³
  if (orderType === 'buy' && totalValue > userBalance.cashBalance) {
    setPurchaseResult({
      success: false,
      message: `èµ„é‡‘ä¸è¶³ã€‚éœ€è¦ ${formatCurrency(totalValue)}ï¼Œå¯ç”¨ ${formatCurrency(userBalance.cashBalance)}`
    });
    return;
  }
  
  // åˆ›å»ºè®¢å•å¹¶æ›´æ–°ä½™é¢
  const newOrder: TradeOrder = {
    stock, orderType, quantity,
    orderPrice: stock.currentPrice,
    totalValue,
    orderTime: new Date().toISOString()
  };
  
  setTradeOrders(prev => [...prev, newOrder]);
  
  if (orderType === 'buy') {
    setUserBalance(prev => ({
      ...prev,
      cashBalance: prev.cashBalance - totalValue
    }));
  }
}, [userBalance.cashBalance]);
```

## ğŸš€ æœªæ¥æ‰©å±•åŠŸèƒ½

### ç¬¬ä¸€é˜¶æ®µ: åŸºç¡€åŠŸèƒ½å®Œå–„
- [ ] ä»·æ ¼æé†’ç³»ç»Ÿ
- [ ] è‡ªé€‰è‚¡åˆ†ç»„ç®¡ç†
- [ ] äº¤æ˜“æ‰‹ç»­è´¹è®¡ç®—
- [ ] æŒä»“ç›ˆäºè®¡ç®—

### ç¬¬äºŒé˜¶æ®µ: é«˜çº§åŠŸèƒ½
- [ ] Kçº¿å›¾é›†æˆ
- [ ] æŠ€æœ¯æŒ‡æ ‡åˆ†æ
- [ ] æ–°é—»èµ„è®¯è”åŠ¨
- [ ] æ™ºèƒ½æ¨èç³»ç»Ÿ

### ç¬¬ä¸‰é˜¶æ®µ: ä¸“ä¸šåŠŸèƒ½
- [ ] æœŸæƒäº¤æ˜“æ¨¡æ‹Ÿ
- [ ] ç»„åˆç­–ç•¥å›æµ‹
- [ ] é£é™©è¯„ä¼°å·¥å…·
- [ ] ç¤¾äº¤äº¤æ˜“åŠŸèƒ½

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æ¸²æŸ“ä¼˜åŒ–
```typescript
// ä½¿ç”¨ useCallback é˜²æ­¢ä¸å¿…è¦çš„é‡æ¸²æŸ“
const toggleWatchlist = useCallback((stock: MarketStock) => {
  // ... å®ç°é€»è¾‘
}, []);

// ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ
const filteredStocks = useMemo(() => {
  return getFilteredAndSortedStocks();
}, [filterSector, sortBy, marketTop10Stocks]);
```

### æ•°æ®ç¼“å­˜
- æœ¬åœ°å­˜å‚¨è‡ªé€‰è‚¡åˆ—è¡¨
- äº¤æ˜“è®°å½•æŒä¹…åŒ–
- ç”¨æˆ·åå¥½è®¾ç½®ä¿å­˜

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…

### å“åº”å¼è®¾è®¡
```typescript
// å“åº”å¼å¸ƒå±€æ§åˆ¶
<Stack direction={{ xs: 'column', md: 'row' }} spacing={2}>
  {/* ç§»åŠ¨ç«¯å‚ç›´æ’åˆ—ï¼Œæ¡Œé¢ç«¯æ°´å¹³æ’åˆ— */}
</Stack>

// è¡¨æ ¼åœ¨ç§»åŠ¨ç«¯çš„ä¼˜åŒ–
<TableContainer>
  <Table size="small"> {/* ç´§å‡‘æ¨¡å¼ */}
    {/* ç§»åŠ¨ç«¯éšè—æ¬¡è¦åˆ— */}
    <TableCell sx={{ display: { xs: 'none', md: 'table-cell' } }}>
      {/* æ¡Œé¢ç«¯æ˜¾ç¤ºçš„å†…å®¹ */}
    </TableCell>
  </Table>
</TableContainer>
```

### è§¦æ‘¸ä¼˜åŒ–
- å¢å¤§ç‚¹å‡»åŒºåŸŸ
- æ‰‹åŠ¿å¯¼èˆªæ”¯æŒ
- é•¿æŒ‰å¿«æ·æ“ä½œ

## ğŸ¯ æ€»ç»“

æ–°çš„**StockWatchlistPage**ç»„ä»¶å°†åŸæœ‰çš„è´­ç‰©è½¦æ¦‚å¿µå®Œå…¨é‡æ„ä¸ºä¸“ä¸šçš„é‡‘èäº¤æ˜“ç•Œé¢ï¼Œæä¾›äº†ï¼š

1. **ä¸“ä¸šçš„ç”¨æˆ·ä½“éªŒ** - ç¬¦åˆé‡‘èè¡Œä¸šæ ‡å‡†
2. **å®Œæ•´çš„åŠŸèƒ½é—­ç¯** - ä»æŸ¥çœ‹åˆ°äº¤æ˜“çš„å…¨æµç¨‹
3. **ä¼˜ç§€çš„å¯æ‰©å±•æ€§** - ä¸ºæœªæ¥åŠŸèƒ½é¢„ç•™æ¥å£
4. **å“åº”å¼è®¾è®¡** - æ”¯æŒå¤šè®¾å¤‡è®¿é—®

è¿™ä¸ªæ”¹è¿›å¤§å¤§æå‡äº†åº”ç”¨çš„ä¸“ä¸šæ€§å’Œå®ç”¨æ€§ï¼Œä¸ºç”¨æˆ·æä¾›äº†æ›´æ¥è¿‘çœŸå®è‚¡ç¥¨äº¤æ˜“å¹³å°çš„ä½“éªŒã€‚
